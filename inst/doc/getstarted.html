<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Bartosz Czernecki, Arkadiusz Głogowski, Jakub Nowosad" />

<meta name="date" content="2025-10-30" />

<title>Introduction to the climate package</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to the climate package</h1>
<h4 class="author">Bartosz Czernecki, Arkadiusz Głogowski, Jakub
Nowosad</h4>
<h4 class="date">2025-10-30</h4>



<p>The goal of the <strong>climate</strong> R package is to automatize
downloading of meteorological and hydrological data from publicly
available repositories:</p>
<ul>
<li>OGIMET <a href="http://ogimet.com/index.phtml.en">(ogimet.com)</a></li>
<li>University of Wyoming - atmospheric vertical profiling data (<a href="http://weather.uwyo.edu/upperair/" class="uri">http://weather.uwyo.edu/upperair/</a>).</li>
<li>Polish Institute of Meteorology and Water Management - National
Research Institute <a href="https://dane.imgw.pl/">(IMGW-PIB)</a></li>
<li>National Oceanic &amp; Atmospheric Administration - Earth System
Research Laboratory - Global Monitoring Division <a href="https://gml.noaa.gov/ccgg/trends/">(NOAA)</a></li>
<li>National Oceanic &amp; Atmospheric Administration - National
Climatic Data Center - Integrated Surface Hourly (ISH) <a href="https://www1.ncdc.noaa.gov/pub/data/noaa/">(NOAA)</a></li>
</ul>
<div id="functions" class="section level2">
<h2>Functions</h2>
<p>The <strong>climate</strong> package consists of ten main functions -
three for meteorological data, one for hydrological data and six
auxiliary functions and datasets:</p>
<div id="meteorological-data" class="section level3">
<h3>Meteorological data</h3>
<ul>
<li><p><strong>meteo_ogimet()</strong> - Downloading hourly and daily
meteorological data from the SYNOP stations available in the ogimet.com
collection. Any meteorological (aka SYNOP) station working under the
World Meteorological Organizaton (WMO) framework after year 2000 should
be accessible.</p></li>
<li><p><strong>meteo_imgw()</strong> - Downloading hourly, daily, and
monthly meteorological data from the SYNOP/CLIMATE/PRECIP stations
available in the dane.imgw.pl collection. It is a wrapper for
<code>meteo_monthly()</code>, <code>meteo_daily()</code>, and
<code>meteo_hourly()</code></p></li>
<li><p><strong>meteo_noaa_hourly()</strong> - Downloading hourly NOAA
Integrated Surface Hourly (ISH) meteorological data - Some stations have
&gt; 100 years long history of observations</p></li>
<li><p><strong>sounding_wyoming()</strong> - Downloading measurements of
the vertical profile of atmosphere (aka rawinsonde data)</p></li>
</ul>
</div>
<div id="hydrological-data" class="section level3">
<h3>Hydrological data</h3>
<ul>
<li><strong>hydro_imgw()</strong> - Downloading hourly, daily, and
monthly hydrological data from the SYNOP / CLIMATE / PRECIP stations
available in the danepubliczne.imgw.pl collection. It is a wrapper for
<code>hydro_monthly()</code>, and <code>hydro_daily()</code></li>
</ul>
</div>
<div id="auxiliary-functions-and-datasets" class="section level3">
<h3>Auxiliary functions and datasets</h3>
<ul>
<li><strong>stations_ogimet()</strong> - Downloading information about
all stations available in the selected country in the Ogimet
repository</li>
<li><strong>nearest_stations_ogimet()</strong> - Downloading information
about nearest stations to the selected point available for the selected
country in the Ogimet repository</li>
<li><strong>imgw_meteo_stations</strong> - Built-in metadata from the
IMGW-PIB repository for meteorological stations, their geographical
coordinates, and ID numbers</li>
<li><strong>imgw_hydro_stations</strong> - Built-in metadata from the
IMGW-PIB repository for hydrological stations, their geographical
coordinates, and ID numbers</li>
<li><strong>imgw_meteo_abbrev</strong> - Dictionary explaining variables
available for meteorological stations (from the IMGW-PIB
repository)</li>
<li><strong>imgw_hydro_abbrev</strong> - Dictionary explaining variables
available for hydrological stations (from the IMGW-PIB repository)</li>
</ul>
</div>
</div>
<div id="examples" class="section level2">
<h2>Examples</h2>
<p>Examples shows application of climate package with additional use of
tools that help with processing the data to increase legible of
downloaded data.</p>
<ul>
<li><a href="https://CRAN.R-project.org/package=dplyr">dplyr</a></li>
<li><a href="https://CRAN.R-project.org/package=tidyr">tidyr</a></li>
</ul>
<div id="example-1" class="section level3">
<h3>Example 1</h3>
<p>Finding a 50 nearest meteorological stations for a given coordinates
in a given country(ies):</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(climate)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>ns <span class="ot">=</span> <span class="fu">nearest_stations_ogimet</span>(<span class="at">country =</span> <span class="fu">c</span>(<span class="st">&quot;United Kingdom&quot;</span>, <span class="st">&quot;France&quot;</span>),</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>                             <span class="at">point =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">50</span>),</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>                             <span class="at">no_of_stations =</span> <span class="dv">50</span>, </span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>                             <span class="at">add_map =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co">#&gt; Wrong name of a country. Please check countries names at </span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co">#&gt;          https://ogimet.com/display_stations.php?lang=en&amp;tipo=AND&amp;isyn=&amp;oaci=&amp;nombre=&amp;estado=&amp;Send=Send</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co">#&gt; Wrong name of a country. Please check countries names at </span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co">#&gt;          https://ogimet.com/display_stations.php?lang=en&amp;tipo=AND&amp;isyn=&amp;oaci=&amp;nombre=&amp;estado=&amp;Send=Send</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.data.frame</span>(ns)) {</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a> knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(ns, <span class="dv">15</span>))</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="example-2" class="section level3">
<h3>Example 2</h3>
<p>Summary of stations available in Ogimet repository for a selected
country:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(climate)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>PL <span class="ot">=</span> <span class="fu">stations_ogimet</span>(<span class="at">country =</span> <span class="st">&quot;Poland&quot;</span>, <span class="at">add_map =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">#&gt; Problems with downloading data. Run function with argument allow_failure = FALSE to see more details</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.data.frame</span>(PL)) {</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>    knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(PL))</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="example-3" class="section level3">
<h3>Example 3</h3>
<p>Downlading hourly meteorological data from Svalbard (Norway) for year
2016 using NOAA service</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># downloading data with NOAA service:</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">meteo_noaa_hourly</span>(<span class="at">station =</span> <span class="st">&quot;010080-99999&quot;</span>, <span class="at">year =</span> <span class="dv">2016</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># You can also download the same (but more granular) data with Ogimet.com (example for year 2016):</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="co"># df = meteo_ogimet(interval = &quot;hourly&quot;, </span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co">#                   date = c(&quot;2016-01-01&quot;, &quot;2016-12-31&quot;),</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co">#                   station = c(&quot;01008&quot;))</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(df))</span></code></pre></div>
<table>
<colgroup>
<col width="3%" />
<col width="21%" />
<col width="5%" />
<col width="6%" />
<col width="4%" />
<col width="5%" />
<col width="7%" />
<col width="6%" />
<col width="4%" />
<col width="4%" />
<col width="6%" />
<col width="3%" />
<col width="4%" />
<col width="7%" />
<col width="11%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">date</th>
<th align="right">year</th>
<th align="right">month</th>
<th align="right">day</th>
<th align="right">hour</th>
<th align="right">lon</th>
<th align="right">lat</th>
<th align="right">alt</th>
<th align="right">t2m</th>
<th align="right">dpt2m</th>
<th align="right">ws</th>
<th align="right">wd</th>
<th align="right">slp</th>
<th align="right">visibility</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">2016-01-01 00:00:00</td>
<td align="right">2016</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">15.467</td>
<td align="right">78.25</td>
<td align="right">29</td>
<td align="right">5.0</td>
<td align="right">-1.6</td>
<td align="right">5</td>
<td align="right">200</td>
<td align="right">1007.5</td>
<td align="right">65000</td>
</tr>
<tr class="even">
<td align="left">3</td>
<td align="left">2016-01-01 01:00:00</td>
<td align="right">2016</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">15.467</td>
<td align="right">78.25</td>
<td align="right">29</td>
<td align="right">5.2</td>
<td align="right">-1.7</td>
<td align="right">3</td>
<td align="right">180</td>
<td align="right">1008.2</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="left">2016-01-01 02:00:00</td>
<td align="right">2016</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">15.467</td>
<td align="right">78.25</td>
<td align="right">29</td>
<td align="right">4.6</td>
<td align="right">-1.2</td>
<td align="right">6</td>
<td align="right">170</td>
<td align="right">1008.5</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">7</td>
<td align="left">2016-01-01 03:00:00</td>
<td align="right">2016</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">15.467</td>
<td align="right">78.25</td>
<td align="right">29</td>
<td align="right">4.3</td>
<td align="right">-0.9</td>
<td align="right">5</td>
<td align="right">190</td>
<td align="right">1008.6</td>
<td align="right">70001</td>
</tr>
<tr class="odd">
<td align="left">9</td>
<td align="left">2016-01-01 04:00:00</td>
<td align="right">2016</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="right">15.467</td>
<td align="right">78.25</td>
<td align="right">29</td>
<td align="right">3.7</td>
<td align="right">-1.0</td>
<td align="right">5</td>
<td align="right">160</td>
<td align="right">1008.8</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">11</td>
<td align="left">2016-01-01 05:00:00</td>
<td align="right">2016</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="right">15.467</td>
<td align="right">78.25</td>
<td align="right">29</td>
<td align="right">3.2</td>
<td align="right">-1.0</td>
<td align="right">4</td>
<td align="right">150</td>
<td align="right">1008.6</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
</div>
<div id="example-4" class="section level3">
<h3>Example 4</h3>
<p>Downloading atmospheric vertical profile (sounding) for Łeba, PL
station:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>profile_demo <span class="ot">&lt;-</span> <span class="fu">sounding_wyoming</span>(<span class="at">wmo_id =</span> <span class="dv">12120</span>,</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>                                 <span class="at">yy =</span> <span class="dv">2000</span>,</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>                                 <span class="at">mm =</span> <span class="dv">3</span>,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>                                 <span class="at">dd =</span> <span class="dv">23</span>,</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>                                 <span class="at">hh =</span> <span class="dv">0</span>)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>df2 <span class="ot">=</span> profile_demo[[<span class="dv">1</span>]] </span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="fu">colnames</span>(df2)[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">4</span>)] <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;PRESS&quot;</span>, <span class="st">&quot;TEMP&quot;</span>, <span class="st">&quot;DEWPT&quot;</span>) <span class="co"># changing column names</span></span></code></pre></div>
<table>
<caption>Exemplary data frame of sounding preprocessing</caption>
<thead>
<tr class="header">
<th align="right">PRESS</th>
<th align="right">HGHT</th>
<th align="right">TEMP</th>
<th align="right">DEWPT</th>
<th align="right">RELH</th>
<th align="right">MIXR</th>
<th align="right">DRCT</th>
<th align="right">SKNT</th>
<th align="right">THTA</th>
<th align="right">THTE</th>
<th align="right">THTV</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1013</td>
<td align="right">6</td>
<td align="right">4.2</td>
<td align="right">3.8</td>
<td align="right">97</td>
<td align="right">4.98</td>
<td align="right">270</td>
<td align="right">8</td>
<td align="right">276.3</td>
<td align="right">290.0</td>
<td align="right">277.2</td>
</tr>
<tr class="even">
<td align="right">1009</td>
<td align="right">37</td>
<td align="right">2.4</td>
<td align="right">2.3</td>
<td align="right">99</td>
<td align="right">4.50</td>
<td align="right">285</td>
<td align="right">12</td>
<td align="right">274.9</td>
<td align="right">287.2</td>
<td align="right">275.6</td>
</tr>
<tr class="odd">
<td align="right">1000</td>
<td align="right">107</td>
<td align="right">2.2</td>
<td align="right">1.9</td>
<td align="right">98</td>
<td align="right">4.41</td>
<td align="right">295</td>
<td align="right">17</td>
<td align="right">275.4</td>
<td align="right">287.5</td>
<td align="right">276.1</td>
</tr>
<tr class="even">
<td align="right">976</td>
<td align="right">303</td>
<td align="right">0.8</td>
<td align="right">-1.3</td>
<td align="right">86</td>
<td align="right">3.58</td>
<td align="right">298</td>
<td align="right">23</td>
<td align="right">275.9</td>
<td align="right">285.8</td>
<td align="right">276.5</td>
</tr>
<tr class="odd">
<td align="right">970</td>
<td align="right">352</td>
<td align="right">1.0</td>
<td align="right">-6.0</td>
<td align="right">60</td>
<td align="right">2.53</td>
<td align="right">299</td>
<td align="right">25</td>
<td align="right">276.6</td>
<td align="right">283.8</td>
<td align="right">277.0</td>
</tr>
<tr class="even">
<td align="right">959</td>
<td align="right">444</td>
<td align="right">1.0</td>
<td align="right">-0.6</td>
<td align="right">89</td>
<td align="right">3.83</td>
<td align="right">300</td>
<td align="right">27</td>
<td align="right">277.4</td>
<td align="right">288.2</td>
<td align="right">278.1</td>
</tr>
<tr class="odd">
<td align="right">925</td>
<td align="right">733</td>
<td align="right">-1.1</td>
<td align="right">-1.1</td>
<td align="right">100</td>
<td align="right">3.83</td>
<td align="right">290</td>
<td align="right">27</td>
<td align="right">278.2</td>
<td align="right">288.9</td>
<td align="right">278.8</td>
</tr>
<tr class="even">
<td align="right">913</td>
<td align="right">837</td>
<td align="right">-1.5</td>
<td align="right">-1.5</td>
<td align="right">100</td>
<td align="right">3.76</td>
<td align="right">285</td>
<td align="right">27</td>
<td align="right">278.8</td>
<td align="right">289.4</td>
<td align="right">279.4</td>
</tr>
<tr class="odd">
<td align="right">877</td>
<td align="right">1157</td>
<td align="right">-2.9</td>
<td align="right">-2.9</td>
<td align="right">100</td>
<td align="right">3.54</td>
<td align="right">288</td>
<td align="right">29</td>
<td align="right">280.6</td>
<td align="right">290.6</td>
<td align="right">281.2</td>
</tr>
<tr class="even">
<td align="right">850</td>
<td align="right">1404</td>
<td align="right">-4.1</td>
<td align="right">-4.1</td>
<td align="right">100</td>
<td align="right">3.33</td>
<td align="right">290</td>
<td align="right">31</td>
<td align="right">281.8</td>
<td align="right">291.4</td>
<td align="right">282.4</td>
</tr>
</tbody>
</table>
</div>
<div id="example-5" class="section level3">
<h3>Example 5</h3>
<p>Preparing an annual summary of air temperature and precipitation
using <strong>dplyr</strong> syntax for 10-years period (1991-2000)</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">library</span>(climate)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">meteo_imgw</span>(<span class="at">interval =</span> <span class="st">&quot;monthly&quot;</span>, <span class="at">rank =</span> <span class="st">&quot;synop&quot;</span>, <span class="at">year =</span> <span class="dv">1991</span><span class="sc">:</span><span class="dv">2000</span>, <span class="at">station =</span> <span class="st">&quot;ŁEBA&quot;</span>) </span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co"># please note that sometimes 2 names are used for the same station in different years</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">suppressMessages</span>(<span class="fu">library</span>(dplyr))</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>df2 <span class="ot">=</span> dplyr<span class="sc">::</span><span class="fu">select</span>(df, station<span class="sc">:</span>t2m_mean_mon, rr_monthly)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>monthly_summary <span class="ot">=</span> df2 <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(mm) <span class="sc">%&gt;%</span> </span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">tmax =</span> <span class="fu">mean</span>(tmax_abs, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>                   <span class="at">tmin =</span> <span class="fu">mean</span>(tmin_abs, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>                   <span class="at">tavg =</span> <span class="fu">mean</span>(t2m_mean_mon, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>                   <span class="at">precip =</span> <span class="fu">sum</span>(rr_monthly) <span class="sc">/</span> <span class="fu">n_distinct</span>(yy))            </span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>monthly_summary <span class="ot">=</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(monthly_summary[, <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>)])) </span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>monthly_summary <span class="ot">=</span> <span class="fu">round</span>(monthly_summary, <span class="dv">1</span>)</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="fu">colnames</span>(monthly_summary) <span class="ot">=</span> month.abb</span></code></pre></div>
<table>
<caption>Exemplary data frame of meteorological preprocessing.</caption>
<colgroup>
<col width="10%" />
<col width="8%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="7%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">Jan</th>
<th align="right">Feb</th>
<th align="right">Mar</th>
<th align="right">Apr</th>
<th align="right">May</th>
<th align="right">Jun</th>
<th align="right">Jul</th>
<th align="right">Aug</th>
<th align="right">Sep</th>
<th align="right">Oct</th>
<th align="right">Nov</th>
<th align="right">Dec</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">precip</td>
<td align="right">39.0</td>
<td align="right">34.6</td>
<td align="right">41.0</td>
<td align="right">32.1</td>
<td align="right">50.5</td>
<td align="right">57.5</td>
<td align="right">52.7</td>
<td align="right">78.5</td>
<td align="right">68.9</td>
<td align="right">83.8</td>
<td align="right">47.9</td>
<td align="right">52.0</td>
</tr>
<tr class="even">
<td align="left">tmax</td>
<td align="right">8.1</td>
<td align="right">9.1</td>
<td align="right">13.6</td>
<td align="right">22.6</td>
<td align="right">25.6</td>
<td align="right">29.6</td>
<td align="right">29.6</td>
<td align="right">28.5</td>
<td align="right">22.7</td>
<td align="right">18.4</td>
<td align="right">11.6</td>
<td align="right">8.8</td>
</tr>
<tr class="odd">
<td align="left">tmin</td>
<td align="right">-11.6</td>
<td align="right">-9.6</td>
<td align="right">-6.3</td>
<td align="right">-4.1</td>
<td align="right">0.0</td>
<td align="right">4.5</td>
<td align="right">6.4</td>
<td align="right">6.7</td>
<td align="right">3.0</td>
<td align="right">-1.6</td>
<td align="right">-6.0</td>
<td align="right">-10.4</td>
</tr>
<tr class="even">
<td align="left">tavg</td>
<td align="right">0.5</td>
<td align="right">0.7</td>
<td align="right">2.7</td>
<td align="right">6.8</td>
<td align="right">10.6</td>
<td align="right">14.4</td>
<td align="right">16.9</td>
<td align="right">17.0</td>
<td align="right">13.2</td>
<td align="right">8.8</td>
<td align="right">3.7</td>
<td align="right">0.9</td>
</tr>
</tbody>
</table>
</div>
<div id="example-6" class="section level3">
<h3>Example 6</h3>
<p>Calculate the mean maximum value of the flow on the stations in each
year with <strong>dplyr</strong>’s <code>summarise()</code>, and spread
data by year using <strong>tidyr</strong>’s <code>spread()</code> to get
the annual means of maximum flow in the consecutive columns.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">library</span>(climate)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>h <span class="ot">=</span> <span class="fu">hydro_imgw</span>(<span class="at">interval =</span> <span class="st">&quot;monthly&quot;</span>, <span class="at">year =</span> <span class="dv">2001</span><span class="sc">:</span><span class="dv">2002</span>, <span class="at">coords =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(h))</span></code></pre></div>
<table>
<colgroup>
<col width="7%" />
<col width="12%" />
<col width="9%" />
<col width="10%" />
<col width="9%" />
<col width="14%" />
<col width="6%" />
<col width="7%" />
<col width="6%" />
<col width="4%" />
<col width="4%" />
<col width="3%" />
<col width="3%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">id</th>
<th align="right">X</th>
<th align="right">Y</th>
<th align="left">station</th>
<th align="left">riv_or_lake</th>
<th align="right">hyy</th>
<th align="right">idhyy</th>
<th align="right">idex</th>
<th align="right">H</th>
<th align="right">Q</th>
<th align="right">T</th>
<th align="right">mm</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">18723</td>
<td align="right">150210180</td>
<td align="right">21.8335</td>
<td align="right">50.88641</td>
<td align="left">ANNOPOL</td>
<td align="left">Wisła (2)</td>
<td align="right">2001</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">214</td>
<td align="right">172</td>
<td align="right">NA</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">18724</td>
<td align="right">150210180</td>
<td align="right">21.8335</td>
<td align="right">50.88641</td>
<td align="left">ANNOPOL</td>
<td align="left">Wisła (2)</td>
<td align="right">2001</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="right">228</td>
<td align="right">207</td>
<td align="right">NA</td>
<td align="right">11</td>
</tr>
<tr class="odd">
<td align="left">18725</td>
<td align="right">150210180</td>
<td align="right">21.8335</td>
<td align="right">50.88641</td>
<td align="left">ANNOPOL</td>
<td align="left">Wisła (2)</td>
<td align="right">2001</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="right">250</td>
<td align="right">272</td>
<td align="right">NA</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">18726</td>
<td align="right">150210180</td>
<td align="right">21.8335</td>
<td align="right">50.88641</td>
<td align="left">ANNOPOL</td>
<td align="left">Wisła (2)</td>
<td align="right">2001</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">215</td>
<td align="right">174</td>
<td align="right">NA</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">18727</td>
<td align="right">150210180</td>
<td align="right">21.8335</td>
<td align="right">50.88641</td>
<td align="left">ANNOPOL</td>
<td align="left">Wisła (2)</td>
<td align="right">2001</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">225</td>
<td align="right">201</td>
<td align="right">NA</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">18728</td>
<td align="right">150210180</td>
<td align="right">21.8335</td>
<td align="right">50.88641</td>
<td align="left">ANNOPOL</td>
<td align="left">Wisła (2)</td>
<td align="right">2001</td>
<td align="right">2</td>
<td align="right">3</td>
<td align="right">258</td>
<td align="right">297</td>
<td align="right">NA</td>
<td align="right">12</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>h2 <span class="ot">=</span> h <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(idex <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id, station, X, Y, hyy, Q) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(hyy, id, station, X, Y) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">annual_mean_Q =</span> <span class="fu">round</span>(<span class="fu">mean</span>(Q, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> hyy, <span class="at">values_from =</span> annual_mean_Q)</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co">#&gt; `summarise()` has grouped output by &#39;hyy&#39;, &#39;id&#39;, &#39;station&#39;, &#39;X&#39;. You can</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co">#&gt; override using the `.groups` argument.</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(h2))</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">id</th>
<th align="left">station</th>
<th align="right">X</th>
<th align="right">Y</th>
<th align="right">2001</th>
<th align="right">2002</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">149180010</td>
<td align="left">KRZYŻANOWICE</td>
<td align="right">18.28780</td>
<td align="right">49.99301</td>
<td align="right">200.5</td>
<td align="right">147.4</td>
</tr>
<tr class="even">
<td align="right">149180020</td>
<td align="left">CHAŁUPKI</td>
<td align="right">18.32752</td>
<td align="right">49.92127</td>
<td align="right">174.7</td>
<td align="right">96.7</td>
</tr>
<tr class="odd">
<td align="right">149180040</td>
<td align="left">GOŁKOWICE</td>
<td align="right">18.49640</td>
<td align="right">49.92579</td>
<td align="right">4.5</td>
<td align="right">2.0</td>
</tr>
<tr class="even">
<td align="right">149180050</td>
<td align="left">ZEBRZYDOWICE</td>
<td align="right">18.61326</td>
<td align="right">49.88025</td>
<td align="right">13.5</td>
<td align="right">7.9</td>
</tr>
<tr class="odd">
<td align="right">149180060</td>
<td align="left">CIESZYN</td>
<td align="right">18.62972</td>
<td align="right">49.74616</td>
<td align="right">57.2</td>
<td align="right">57.7</td>
</tr>
<tr class="even">
<td align="right">149180070</td>
<td align="left">CIESZYN</td>
<td align="right">18.63137</td>
<td align="right">49.74629</td>
<td align="right">NaN</td>
<td align="right">NaN</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="acknowledgment" class="section level2">
<h2>Acknowledgment</h2>
<p>Ogimet.com, University of Wyoming, and Institute of Meteorology and
Water Management - National Research Institute (IMGW-PIB), National
Oceanic &amp; Atmospheric Administration (NOAA) - Earth System Research
Laboratories - Global Monitoring Laboratory, Global Monitoring Division
and Integrated Surface Hourly (NOAA ISH) are the sources of the
data.</p>
</div>
<div id="contribution" class="section level2">
<h2>Contribution</h2>
<p>Contributions to this package are welcome. The preferred method of
contribution is through a GitHub pull request. Feel also free to contact
us by creating <a href="https://github.com/bczernecki/climate/issues">an
issue</a>.</p>
</div>
<div id="citation" class="section level2">
<h2>Citation</h2>
<p>To cite the <code>climate</code> package in publications, please use
<a href="https://www.mdpi.com/2071-1050/12/1/394">this paper</a>:</p>
<p>Czernecki, B.; Głogowski, A.; Nowosad, J. Climate: An R Package to
Access Free In-Situ Meteorological and Hydrological Datasets for
Environmental Assessment. Sustainability 2020, 12, 394. <a href="https://doi.org/10.3390/su12010394" class="uri">https://doi.org/10.3390/su12010394</a>”</p>
<p>LaTeX version can be obtained with:</p>
<pre><code>library(climate)
citation(&quot;climate&quot;)</code></pre>
<!-- ![Mean maximum annual flow](../../docs/articles/articles/pl_files/figure-html/unnamed-chunk-1-1.png) -->
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
